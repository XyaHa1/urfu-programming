import random

from ..effects import Effect


class EffectManager:
    MESSAGE = {
        "Кровотечение": [
            "Лезвие нашего героя вспарывает плоть '{target}' — и кровь хлещет, не желая останавливаться. Рана зияет, как рана самой судьбы.",
            "'{target}' хватается за бок, но пальцы скользят по крови. Каждое мгновение уносит его ближе к краю.",
            "Глубокий порез — и смерть начинает отсчитывать шаги. '{target}' истекает кровью, словно песок в часах.",
            "Рана не заживёт. Наш герой знал это, нанося удар. '{target}' оставляет за собой кровавый след — путь к гибели.",
            "Кровь стекает по земле, рисуя узор смерти. '{target}' слабеет с каждой каплей.",
        ],
        "Огненное пламя": [
            "Из ладоней героя вырвался огненный шар, озарив поле боя адским светом. '{target}' завопил, охваченный пламенем.",
            "Заклинание сорвалось с уст героя — и огненный снаряд вонзился в '{target}', оставляя за ним шлейф пепла и боли.",
            "Воздух задрожал от жара, когда герой призвал огненный шар. '{target}' попытался бежать... но было слишком поздно.",
            "Пламя древних разлилось по земле, пожирая всё на пути. '{target}' стал его жертвой — плоть обуглилась, душа закричала.",
            "С небес упал огонь по воле герой. '{target}' застыл в агонии, окутанный огнём.",
        ],
        "Щит": [
            "Вокруг героя вспыхнул барьер из чистой магии — щит, сплетённый из воли и заклинаний. Ни один удар не пройдёт.",
            "Герой воздел руки — и пространство вокруг него искривилось, рождая защиту, достойную богов.",
            "Магический щит окутал герой, как плащ из света. Враги могут лишь смотреть и злиться.",
            "Древнее заклинание пробудилось — и герой стал недоступен для боли. Щит активирован.",
            "Энергия сгустилась вокруг героя, создавая невидимую стену. Смерть отступила на шаг.",
        ],
    }

    def __init__(self, custom_print=None):
        self._custom_print = custom_print

    def on_effect(self, target, effect: Effect):
        msg = random.choice(self.MESSAGE.get(str(effect), "'{target}' получил неизвестный эффект!"))
        self._custom_print(msg.format(target=str(target)))
